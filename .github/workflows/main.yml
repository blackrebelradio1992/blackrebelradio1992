# Gihub Action for generationg a contribution graph with a snake eating your contributions
name: Generate Snake

#controls when the action will run
on:
  schedule:
    #every 12 hours
    - cron: "o */6 * * *"

    #this command allows us to run thActions automatically from the actions tab.
    workflow_dispatch:

    # also run on everypush on the master branch
    push:
      branches:
      - main

  # the sequence of runs in this workflow:
  jobs:
    #this workflow contains a single job called "build"
    build:
      #the type of runner that the jub will run on 
      runs-on: ubuntu-latest

      #steps represent a sequence of tasks that will be executed as part of the job
      steps:
        - name: Clone repo
          uses: actions/checkout@v3

        - name: Generate the snake files in './dist/'
          uses: Platane/snk@v3
          id: snake-gif
          with:
            github_user_name: ${{ github.repository_owner }}
            outputs: |
              dist/github-snake.svg
              dist/github-snake-dark.svg?palette=github-dark
              dist/ocean.gif?color_snake=red&color_dots=#bfd6f6,#8dbdff,#64a1f4,#4b91f1,#3c7dd9

        - name: Show build status
          run: git status

        - name: Push new files to the output branch
          uses: crazy-max/ghactions-githubpages@v3.1.0
          with:
            target_branch: output
            build_dir: dist
            commit_message: Update snake animations
          env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}